<header>
	<div class="wrapper">
		<a href="/"><img src="../img/02_ui/logo.png" class="logo" alt="" titl=""/></a>
		<% if (studio) { %>
			<a href="#" class="hamburger"></a>
			<nav class="responsive">
				<ul>
					<li>
						<span class="icon calendar">
	                		<a class="header_menu" href="/calendar">予約カレンダー</a>
	                	</span>
					</li>
					<!-- <li class="icon search" id="search"><a href="javascript:void(0)">予約検索</a></li> -->
					<li class="menu_compact menu__single">
						<span class="icon studio">
	                		<a class="header_menu" href="#">管理</a>
	                	</span>
						
						<ul class="menu__second-level">
	            			<li><a href="/studio">店舗管理</a></li>
	            			<li><a href="/studio_area">スタジオ管理</a></li>
	            			<li><a href="/studio_area_fixture">備品管理</a></li>
	        			</ul>
					</li>
					<li class="menu_spread"><a href="/studio">店舗管理</a></li>
	            	<li class="menu_spread"><a href="/studio_area">スタジオ管理</a></li>
	            	<li class="menu_spread"><a href="/studio_area_fixture">備品管理</a></li>
	                <li class="menu_compact menu__single">
	                	<span class="icon user">
	                		<a class="header_menu" href="#"><%= studio.name %>
	                	</span>
	                    <ul class="menu__second-level">
	                        <li><a href="/studio/manage">ユーザー管理</a></li>
	                        <li><a href="#logout">ログアウト</a></li>
	                    </ul>
	                </li>
	                <li class="menu_spread"><a href="/studio/manage">ユーザー管理</a></li>
	            	<li class="menu_spread"><a href="#logout">ログアウト</a></li>
				</ul>
			</nav>
		<% } else { %>
			<nav c>
				<a id="login" href="javascript:void(0)" class="login_btn">Login</a>
			</nav>
		<% } %>
	</div>
</header>
<div class="remodal" data-remodal-id="logout" id="modal-area">
    <form action="/logout" method="GET" name="logout" accept-charset="utf-8">
		<!-- モーダルのタイトル -->
    	<h2>ログアウトしますか？</h2>
		<!-- キャンセルボタン -->
		<a class="remodal-cancel" href="#" data-remodal-action="cancel">Cancel</a>
		<!-- OKボタン -->
        <a href="javascript:void(0)" onclick="document.logout.submit();return false;" class="remodal-confirm" data-remodal-action="confirm" style="display:inline-block">OK</a>
	</form>
</div>

<div id="login" class="remodal" data-remodal-id="login">
	<h2>ログイン</h2>
	<div class="form">
    	<p>ID</p>
    	<input type="text" name="id">
    	<p>PASSWORD</p>
    	<input type="password" size="50" maxlength="12" name="password">
	</div>
	<!-- キャンセルボタン -->
	<a class="remodal-cancel" href="#" data-remodal-action="cancel">Cancel</a>
	<!-- OKボタン -->
    <a href="javascript:void(0)" id="actionLogin" class="remodal-confirm" style="display:inline-block">OK</a>
</div>
<script>
	// modalが残ってる可能性があるので、初期表示でモーダルを閉じる
	//$('[data-remodal-id=login]').remodal().close();
   	$("#login").on("click", function() {
   		$('[data-remodal-id=login]').remodal().open();
   	});

	// modalが残ってる可能性があるので、初期表示でモーダルを閉じる
	// $('[data-remodal-id=search]').remodal().close();

	$('.hamburger').on('click', function(e){
		e.preventDefault();
		$(this).toggleClass('opned');
		$('header nav').toggleClass('active');
		
	});

	$("#search").on("click", function() {
   		$('[data-remodal-id=search]').remodal().open();
   	});

    $("#actionLogin").click(function(){
        $.ajax({
            type: "POST",
            url: "/auth/confirm",
            data: {
                "id": $("#login input[name='id']").val(),
                "password": $("#login input[name='password']").val()
            },
            success: function(data){
            	if (data.status == 500) {
            		// data.messageを表示
            		alert(data.message);
            	} else if (data.status == 200) {
            		location.href = '/calendar'
            	}
            }
        });
    });
</script>